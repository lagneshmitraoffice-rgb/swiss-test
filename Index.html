<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Swiss Ephemeris Boot Test</title>
</head>

<body style="font-family:monospace; background:#111; color:#00ff9c">

<h1>üöÄ Swiss Ephemeris Boot Test</h1>
<div id="log">Booting...</div>

<script type="module">

const logBox = document.getElementById("log");
const log = msg => {
  logBox.innerHTML += "<br>" + msg;
  console.log(msg);
};

async function bootSwiss(){

  try{

    log("Importing Swiss module...");

    const SwissModule = (await import("./swisseph.js")).default;

    log("Creating Swiss instance...");

    const swe = await SwissModule({
      locateFile: file => "./" + file
    });

    log("Running test calculation...");

    const jd = swe.swe_julday(
      2000, 1, 1, 0,
      swe.SE_GREG_CAL
    );

    const res = swe.swe_calc_ut(
      jd,
      swe.SE_SUN,
      swe.SEFLG_SWIEPH
    );

    log("Sun longitude = " + res.longitude.toFixed(6) + "¬∞");

    log("üéâ SUCCESS ‚Äî Swiss Loaded");

  }
  catch(err){

    log("‚ùå ERROR:");
    log(err.message);
    console.error(err);

  }

}

bootSwiss();

</script>

</body>
</html>
