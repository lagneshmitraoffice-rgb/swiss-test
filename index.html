<!DOCTYPE html>
<html>
<head>
  <title>LM Swiss Astro Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
</head>

<body>

<h2>LM Swiss Ephemeris Engine ðŸš€</h2>

<input id="name" placeholder="Full Name"><br>

<label>DOB</label><br>
<input id="dob" type="date"><br>

<label>TOB</label><br>
<input id="tob" type="time"><br>

<input id="pob" placeholder="Place of Birth"><br>
<input id="country" placeholder="Country"><br>

<button id="generateBtn">Generate Chart</button>

<pre id="resultBox">ðŸ”„ Booting Astro Engine...</pre>

<script type="module">

console.log("LM ASTRO ENGINE UI READY ðŸš€");

const box = document.getElementById("resultBox");

/* ===================================================
ðŸ§  CREATE SWISS WORKER
=================================================== */

// â­ file name EXACT same hona chahiye â†’ swissworker.js
const worker = new Worker("./swissworker.js", { type: "module" });

/* ===================================================
ðŸ“¨ WORKER MESSAGES
=================================================== */

worker.onmessage = (e) => {

  if (e.data.type === "ready") {
    box.textContent = "âœ… Swiss Ephemeris Ready";
  }

  if (e.data.type === "result") {
    box.textContent = JSON.stringify(e.data.data, null, 2);
  }

  if (e.data.type === "error") {
    box.textContent = "âŒ Error:\n" + e.data.message;
  }

  // â­ VERY IMPORTANT â†’ live logs from worker
  if (e.data.type === "log") {
    box.textContent += "\n" + e.data.message;
  }

};

/* ===================================================
ðŸš€ INIT ENGINE
=================================================== */

worker.postMessage({ type: "init" });

/* ===================================================
ðŸ”¥ GENERATE BUTTON
=================================================== */

document.getElementById("generateBtn").onclick = () => {

  const dob = document.getElementById("dob").value;
  const tob = document.getElementById("tob").value;

  if (!dob || !tob) {
    alert("Enter DOB & TOB");
    return;
  }

  box.textContent = "ðŸ”® Calculating chart...";

  worker.postMessage({
    type: "calc",
    dob,
    tob
  });

};

</script>

</body>
</html>
